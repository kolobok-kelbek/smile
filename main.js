(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("emoji-container"),n=document.getElementById("favorites-container"),t=document.getElementById("category-select"),a=document.getElementById("copy-message"),o={all:{name:"All",ranges:[]},emoticons:{name:"Emoticons",ranges:[[128512,128591]]},miscSymbolsPictographs:{name:"Miscellaneous Symbols and Pictographs",ranges:[[127744,128511]]},transport:{name:"Transport and Map Symbols",ranges:[[128640,128767]]},alchemical:{name:"Alchemical Symbols",ranges:[[128768,128895]]},geometricShapes:{name:"Geometric Shapes Extended",ranges:[[128896,129023]]},supplementalArrows:{name:"Supplemental Arrows-C",ranges:[[129024,129279]]},supplementalSymbols:{name:"Supplemental Symbols and Pictographs",ranges:[[129280,129535]]},chessSymbols:{name:"Chess Symbols",ranges:[[129536,129647]]},symbolsExtended:{name:"Symbols and Pictographs Extended-A",ranges:[[129648,129791]]},miscSymbols:{name:"Miscellaneous Symbols",ranges:[[9728,9983]]},dingbats:{name:"Dingbats",ranges:[[9984,10175]]},flags:{name:"Flags",ranges:[[127462,127487]]},technical:{name:"Miscellaneous Technical",ranges:[[8960,9215]]},symbolsArrows:{name:"Miscellaneous Symbols and Arrows",ranges:[[11088,11263]]},mahjong:{name:"Mahjong and Playing Cards",ranges:[[126980,127183]]}};for(let e in o)"all"!==e&&(o.all.ranges=o.all.ranges.concat(o[e].ranges));function s(e){let n=[];return e.forEach((e=>{for(let t=e[0];e[1]&&t<=e[1];t++)n.push(String.fromCodePoint(t))})),n}function r(e,n,t=!1){if(n.innerHTML="",t)for(const e in o){if("all"===e)continue;const t=s(o[e].ranges),a=document.createElement("h2");a.textContent=o[e].name,n.appendChild(a),t.forEach((e=>{const t=document.createElement("span");t.className="emoji",t.innerText=e,t.onclick=n=>c(n,e),l(t,e),n.appendChild(t)}))}else e.forEach((e=>{const t=document.createElement("span");t.className="emoji",t.innerText=e,t.onclick=n=>c(n,e),l(t,e),n.appendChild(t)}))}function c(e,n){navigator.clipboard.writeText(n).then((()=>{!function(e){const n=e.getBoundingClientRect(),t=n.left+n.width/2,o=n.top-10;a.style.top=`${o}px`,a.style.left=`${t}px`,a.classList.remove("hidden"),setTimeout((()=>{a.classList.add("hidden")}),1500)}(e.target)})).catch((e=>{console.error("Failed to copy text: ",e)}))}function l(e,n){const t=document.createElement("span");t.className="heart-icon",t.innerHTML="❤",d(n)&&t.classList.add("favorited"),t.onclick=e=>i(e,n),e.appendChild(t)}function i(e,t){e.stopPropagation();const a=e.target;a.classList.toggle("favorited"),a.classList.contains("favorited")?m(t):(function(e){n.querySelectorAll(".emoji").forEach((t=>{t.innerText===e&&n.removeChild(t)})),p()}(t),g(t,!1)),p()}function m(e){if(!d(e)){const t=document.createElement("span");t.className="emoji",t.innerText=e,t.onclick=n=>c(n,e);const a=document.createElement("span");a.className="heart-icon favorited",a.innerHTML="❤",a.onclick=n=>{i(n,e),t.remove()},t.appendChild(a),n.appendChild(t),g(e,!0)}}function d(e){const t=n.querySelectorAll(".emoji");for(let n of t)if(n.innerText===e)return!0;return!1}function g(n,t){e.querySelectorAll(".emoji").forEach((e=>{if(e.innerText===n){const n=e.querySelector(".heart-icon");t?n.classList.add("favorited"):n.classList.remove("favorited")}}))}function p(){const e=Array.from(n.querySelectorAll(".emoji")).map((e=>e.innerText));localStorage.setItem("favoriteEmojis",JSON.stringify(e))}t.addEventListener("change",(n=>{const t=n.target.value;"all"===t?r(s(o[t].ranges),e,!0):r(s(o[t].ranges),e)})),function(){for(const e in o){const n=document.createElement("option");n.value=e,n.textContent=o[e].name,t.appendChild(n)}}(),r(s(o.all.ranges),e,!0),(JSON.parse(localStorage.getItem("favoriteEmojis"))||[]).forEach((e=>m(e)))}))})();